#version 330
smooth in vec4 lightness;
in vec2 f_texCoord;
flat in float matid;

out vec4 outputColor;

uniform sampler2DArray tex;

const vec3 colors[64] = vec3[](
	vec3(0.00, 0.00, 0.00),
	vec3(0.00, 0.00, 0.33),
	vec3(0.00, 0.00, 0.66),
	vec3(0.00, 0.00, 1.00),

	vec3(0.00, 0.33, 0.00),
	vec3(0.00, 0.33, 0.33),
	vec3(0.00, 0.33, 0.66),
	vec3(0.00, 0.33, 1.00),

	vec3(0.00, 0.66, 0.00),
	vec3(0.00, 0.66, 0.33),
	vec3(0.00, 0.66, 0.66),
	vec3(0.00, 0.66, 1.00),

	vec3(0.00, 1.00, 0.00),
	vec3(0.00, 1.00, 0.33),
	vec3(0.00, 1.00, 0.66),
	vec3(0.00, 1.00, 1.00),

	vec3(0.33, 0.00, 0.00),
	vec3(0.33, 0.00, 0.33),
	vec3(0.33, 0.00, 0.66),
	vec3(0.33, 0.00, 1.00),
	vec3(0.33, 0.33, 0.00),
	vec3(0.33, 0.33, 0.33),
	vec3(0.33, 0.33, 0.66),
	vec3(0.33, 0.33, 1.00),
	vec3(0.33, 0.66, 0.00),
	vec3(0.33, 0.66, 0.33),
	vec3(0.33, 0.66, 0.66),
	vec3(0.33, 0.66, 1.00),
	vec3(0.33, 1.00, 0.00),
	vec3(0.33, 1.00, 0.33),
	vec3(0.33, 1.00, 0.66),
	vec3(0.33, 1.00, 1.00),

	vec3(0.66, 0.00, 0.00),
	vec3(0.66, 0.00, 0.33),
	vec3(0.66, 0.00, 0.66),
	vec3(0.66, 0.00, 1.00),
	vec3(0.66, 0.33, 0.00),
	vec3(0.66, 0.33, 0.33),
	vec3(0.66, 0.33, 0.66),
	vec3(0.66, 0.33, 1.00),
	vec3(0.66, 0.66, 0.00),
	vec3(0.66, 0.66, 0.33),
	vec3(0.66, 0.66, 0.66),
	vec3(0.66, 0.66, 1.00),
	vec3(0.66, 1.00, 0.00),
	vec3(0.66, 1.00, 0.33),
	vec3(0.66, 1.00, 0.66),
	vec3(0.66, 1.00, 1.00),

	vec3(1.00, 0.00, 0.00),
	vec3(1.00, 0.00, 0.33),
	vec3(1.00, 0.00, 0.66),
	vec3(1.00, 0.00, 1.00),
	vec3(1.00, 0.33, 0.00),
	vec3(1.00, 0.33, 0.33),
	vec3(1.00, 0.33, 0.66),
	vec3(1.00, 0.33, 1.00),
	vec3(1.00, 0.66, 0.00),
	vec3(1.00, 0.66, 0.33),
	vec3(1.00, 0.66, 0.66),
	vec3(1.00, 0.66, 1.00),
	vec3(1.00, 1.00, 0.00),
	vec3(1.00, 1.00, 0.33),
	vec3(1.00, 1.00, 0.66),
	vec3(1.00, 1.00, 1.00)
);

void main()
{
	int id = int(matid);
	id = clamp(id, 0, 63);

	//id = 6;

	vec4 t = texture(tex, vec3(f_texCoord, id)) * lightness;
	vec4 c = vec4(colors[id], 1.0);

	float fac0 = 0.00;
	float fac1 = 0.25;
	float fac2 = 1.00;

	outputColor = mix(t,c,fac2);
}
